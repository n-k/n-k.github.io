## Part 2: setting up microk8s on raspberry pi
This post is a continuation of a series on setting up a raspberry pi for this site. In the [previous post](http://localhost:8000/blog/posts/2020-11-06-1.md), I had microk8s installed on ubuntu 20.04 on a Raspberry Pi 4. But, microk8s won't start after reboot, so let's check why.

At this time I have this blog up and running, in k8s, on the pi, so when it didn't come up after a reboot, I ssh'd into the pi and started to check.

Let's see if microk8s started:
```bash
microk8s.status
```

That says microk8s is not running, and within its component services, kubelet service is not running. Everything else seems fine. So lets check what kubelet is doing.

```bash
systemctl status snap.microk8s.daemon-kubelet.service
```

The logs indicate that kubelet tried to start, failed and restarted too many times, too quickly and so it won't be started again. This is a mechanism in systemd to prevent services from restarting endlessly. I can stop kubelet from trying to restart too aggressively, by putting a 5s delay between restarts. Let's use a systemd service overlay for tweaking the default config.

Edit the service overlay:
```bash
sudo systemctl edit  snap.microk8s.daemon-kubelet.service
```
Enter this in the editor:
```
[Service]
RestartSec=5
```
save, close and reboot.
